<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Bootstrap demo</title>
  <!-- <link href="main.css" rel="stylesheet" > -->
  <link href="bootstrap.min.css" rel="stylesheet">
  <style>
    canvas {
      border: 1px solid #000000;
    }
  </style>

</head>

<body >
  <div class="container-fluid">
    <h1>Hello, world!</h1>
    <form id="uploadImg" runat="server">
      <input type="file" id="imgLoader" />
    </form>
    <div class="row">
      <div class="col-md-4">
        <button class="btn btn-info" type="button">ok</button>
      </div>
      <div class="col-md-4">
        <button class="btn btn-info" type="button">ok</button>
      </div>
      <div class="col-md-4">
        <button class="btn btn-info" type="button">ok</button>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12">
        <canvas id="c"></canvas>
      </div>
    </div>
  </div>

  <script src="bootstrap.bundle.min.js"></script>
  <script src="fabric.min.js"></script>
  <script>
    console.log("OK")

    var canvas = new fabric.Canvas("c");
    canvas.setHeight(window.innerHeight);
    canvas.setWidth(window.innerWidth);
    
    var text = new fabric.Textbox('Hello world From Fabric JS', {
      width: 250,
      cursorColor: "blue",
      top: 10,
      left: 10
    });
    canvas.add(text)

    document.getElementById('imgLoader').onchange = function handleImage(e) {
      var reader = new FileReader();
      reader.onload = function (event) {
        var imgObj = new Image();
        imgObj.src = event.target.result;
        imgObj.onload = function () {
          var image = new fabric.Image(imgObj);
          /*
          image.scaleToWidth(canvas.getWidth());
          canvas.centerObject(image);
          canvas.add(image);
          canvas.renderAll();
          */
          canvas.setBackgroundImage(image, canvas.renderAll.bind(canvas), {
            scaleX: canvas.width / image.width,
            scaleY: canvas.height / image.height
          });
        }
      }
      reader.readAsDataURL(e.target.files[0]);
    }

  </script>
</body>

</html>